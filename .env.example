# =============================================================================
# AGENTS.MD V2.0 - PRODUCTION ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env.local and fill in your API keys
# For Vercel deployment, add these as environment variables in your dashboard

# =============================================================================
# ðŸ¤– AI CONFIGURATION
# =============================================================================
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4o-2024-08-06

# =============================================================================
# ðŸ§  GEMINI AI CONFIGURATION (Whale Watch Analysis)
# =============================================================================
# Get your API key from: https://aistudio.google.com/app/apikey
# Used for: Whale Watch transaction analysis with thinking mode and Deep Dive
# Documentation: See pages/api/whale-watch/analyze-gemini.ts for implementation details

# Gemini API Key (REQUIRED for Whale Watch AI analysis)
# Format: Must start with "AIzaSy" followed by 33 characters
# Example: AIzaSyAbCdEfGhIjKlMnOpQrStUvWxYz1234567
# Validation: API key format is validated on startup
GEMINI_API_KEY=your_gemini_api_key_here

# Model Selection (Optional - defaults to gemini-2.5-flash)
# Options: 
#   - gemini-2.5-flash: Fast analysis (~3 seconds), optimized for speed
#   - gemini-2.5-pro: Deep analysis (~7 seconds), comprehensive insights
# 
# Automatic Selection Logic:
#   - Transactions < 100 BTC: Uses gemini-2.5-flash (cost-effective)
#   - Transactions >= 100 BTC: Uses gemini-2.5-pro (Deep Dive enabled)
#   - User can override via API request parameter
# 
# Cost Estimates (per analysis, as of January 2025):
#   - Flash: ~$0.0001 (input + output tokens)
#   - Pro: ~$0.0005 (input + output tokens)
#   - Deep Dive: ~$0.002 (extended context + blockchain data)
GEMINI_MODEL=gemini-2.5-flash

# Thinking Mode (Optional - defaults to true)
# Enable to see AI's step-by-step reasoning process in analysis
# When enabled:
#   - Shows AI's thought process in collapsible "AI Reasoning Process" section
#   - Adds system instruction to model for transparent reasoning
#   - Increases response time by ~10-20%
#   - Helps users understand how AI arrived at conclusions
# When disabled:
#   - Only shows final analysis without reasoning steps
#   - Faster response times
#   - Smaller response payloads
GEMINI_ENABLE_THINKING=true

# Deep Dive Threshold (Optional - defaults to 100 BTC)
# Minimum transaction size to offer Deep Dive analysis with Gemini Pro
# Deep Dive Features:
#   - Fetches blockchain history for source and destination addresses
#   - Analyzes last 10 transactions for each address
#   - Calculates 30-day volume and transaction patterns
#   - Detects accumulation, distribution, and mixing behaviors
#   - Identifies exchange flow direction (deposit/withdrawal)
#   - Provides comprehensive fund flow tracing
#   - Uses Gemini 2.5 Pro with 32K token limit
# Processing Time: 10-15 seconds (includes blockchain data fetch)
GEMINI_PRO_THRESHOLD_BTC=100

# API Performance Settings (Optional)
# Maximum retry attempts for failed API calls (default: 2)
# Retry Logic:
#   - Uses exponential backoff (1s, 2s, 4s)
#   - Only retries on retryable errors (429, 500, 502, 503, 504)
#   - Does not retry on client errors (400, 401, 403)
# Recommended: 2-3 retries for production
GEMINI_MAX_RETRIES=2

# Request timeout in milliseconds (default: 15000 = 15 seconds)
# Timeout Handling:
#   - Standard analysis: 15 seconds
#   - Deep Dive analysis: 30 seconds (automatically extended)
#   - On timeout: Returns partial analysis with disclaimer
# Recommended: 15000 for standard, 30000 for Deep Dive
GEMINI_TIMEOUT_MS=15000

# Rate Limiting (Optional)
# Maximum requests per minute to Gemini API (default: 60)
# Gemini API Limits (as of January 2025):
#   - Free tier: 15 requests per minute
#   - Paid tier: 60 requests per minute
#   - Enterprise: Custom limits
# Note: Exceeding rate limits results in 429 errors with retry-after header
GEMINI_MAX_REQUESTS_PER_MINUTE=60

# Cost Management (Optional)
# Maximum output tokens for Flash model (default: 8192)
# Token Limits:
#   - Flash: 8,192 tokens (sufficient for standard analysis)
#   - Pro: 32,768 tokens (required for Deep Dive)
# Cost Impact:
#   - Lower values reduce cost but may truncate analysis
#   - Higher values increase cost but provide more detailed insights
# Recommended: 8192 for Flash, 32768 for Pro
GEMINI_FLASH_MAX_OUTPUT_TOKENS=8192

# Maximum output tokens for Pro model (default: 32768)
# Used for Deep Dive comprehensive analysis with blockchain data
# Includes: Address behavior, fund flow, historical patterns, market predictions
GEMINI_PRO_MAX_OUTPUT_TOKENS=32768

# Structured Output Validation (Automatic)
# The API automatically validates responses against JSON schema
# Validation includes:
#   - Required fields: transaction_type, market_impact, confidence, reasoning, key_findings, trader_action
#   - Confidence range: 0-100
#   - Minimum array lengths: key_findings (3-10 items)
#   - Minimum text lengths: reasoning (100+ chars), trader_action (50+ chars)
# Invalid responses are rejected with detailed error messages

# =============================================================================
# ðŸ“° NEWS API CONFIGURATION  
# =============================================================================
ALPHA_VANTAGE_API_KEY=your_alpha_vantage_key_here
NEWSAPI_KEY=your_newsapi_key_here

# =============================================================================
# ðŸ“Š MARKET DATA CONFIGURATION
# =============================================================================
COINMARKETCAP_API_KEY=your_coinmarketcap_key_here
BINANCE_API_KEY=your_binance_api_key_here
BINANCE_SECRET_KEY=your_binance_secret_key_here

# =============================================================================
# ðŸ”§ APPLICATION CONFIGURATION
# =============================================================================
# Enable real-time data fetching
ENABLE_LIVE_DATA=true

# Next.js Configuration
NEXTAUTH_URL=https://your-domain.vercel.app
NEXTAUTH_SECRET=your_nextauth_secret_here

# =============================================================================
# ðŸš€ DEPLOYMENT CONFIGURATION
# =============================================================================
NODE_ENV=production
VERCEL_ENV=production