# =============================================================================
# AGENTS.MD V2.0 - PRODUCTION ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env.local and fill in your API keys
# For Vercel deployment, add these as environment variables in your dashboard
#
# QUICK START GUIDE:
# 1. Copy this file: cp .env.example .env.local
# 2. Generate secrets: openssl rand -base64 32 (for JWT_SECRET and CRON_SECRET)
# 3. Set up Vercel Postgres: Dashboard > Storage > Create Database > Postgres
# 4. Set up Vercel KV: Dashboard > Storage > Create Database > KV
# 5. Configure Office 365: Use existing Azure AD credentials
# 6. Fill in all REQUIRED variables below
# 7. Deploy to Vercel: vercel --prod
#
# AUTHENTICATION SYSTEM QUICK REFERENCE:
# ========================================
# 
# REQUIRED VARIABLES (Must be set for authentication to work):
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ 1. DATABASE_URL              - Vercel Postgres connection string    â”‚
# â”‚ 2. JWT_SECRET                - Token signing secret (32+ bytes)     â”‚
# â”‚ 3. KV_REST_API_URL           - Vercel KV URL for rate limiting      â”‚
# â”‚ 4. KV_REST_API_TOKEN         - Vercel KV write token                â”‚
# â”‚ 5. CRON_SECRET               - Cron job authentication (32+ bytes)  â”‚
# â”‚ 6. SENDER_EMAIL              - Office 365 sender mailbox            â”‚
# â”‚ 7. AZURE_TENANT_ID           - Azure AD tenant ID                   â”‚
# â”‚ 8. AZURE_CLIENT_ID           - Azure AD application ID              â”‚
# â”‚ 9. AZURE_CLIENT_SECRET       - Azure AD client secret               â”‚
# â”‚ 10. NEXT_PUBLIC_APP_URL      - Application URL (with protocol)      â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
#
# OPTIONAL VARIABLES (Have sensible defaults):
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ â€¢ JWT_EXPIRATION                    - Default: 7d                   â”‚
# â”‚ â€¢ JWT_REMEMBER_ME_EXPIRATION        - Default: 30d                  â”‚
# â”‚ â€¢ AUTH_RATE_LIMIT_MAX_ATTEMPTS      - Default: 5                    â”‚
# â”‚ â€¢ AUTH_RATE_LIMIT_WINDOW_MS         - Default: 900000 (15 min)     â”‚
# â”‚ â€¢ KV_REST_API_READ_ONLY_TOKEN       - Optional read-only token      â”‚
# â”‚ â€¢ ENABLE_WELCOME_EMAIL              - Default: true                 â”‚
# â”‚ â€¢ ENABLE_SESSION_CLEANUP            - Default: true                 â”‚
# â”‚ â€¢ SESSION_CLEANUP_INTERVAL_HOURS    - Default: 24                   â”‚
# â”‚ â€¢ SESSION_RETENTION_DAYS            - Default: 30                   â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
#
# SETUP CHECKLIST:
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ [ ] 1. Create Vercel Postgres database                              â”‚
# â”‚ [ ] 2. Create Vercel KV database                                    â”‚
# â”‚ [ ] 3. Generate JWT_SECRET: openssl rand -base64 32                 â”‚
# â”‚ [ ] 4. Generate CRON_SECRET: openssl rand -base64 32                â”‚
# â”‚ [ ] 5. Configure Azure AD app registration                          â”‚
# â”‚ [ ] 6. Set SENDER_EMAIL to valid Office 365 mailbox                 â”‚
# â”‚ [ ] 7. Copy all variables to .env.local (development)               â”‚
# â”‚ [ ] 8. Add all variables to Vercel dashboard (production)           â”‚
# â”‚ [ ] 9. Run database migrations: npm run migrate                     â”‚
# â”‚ [ ] 10. Import access codes: npm run import-codes                   â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
#
# DOCUMENTATION:
#   â€¢ Deployment Guide: docs/DEPLOYMENT.md
#   â€¢ User Guide: docs/USER-GUIDE.md
#   â€¢ Database Setup: docs/DATABASE-SETUP-GUIDE.md
#   â€¢ CSRF Protection: docs/CSRF-PROTECTION-GUIDE.md
#   â€¢ Session Cleanup: docs/SESSION-CLEANUP-GUIDE.md
#   â€¢ Admin API: docs/ADMIN-ACCESS-CODES-API.md

# =============================================================================
# ğŸ¤– AI CONFIGURATION
# =============================================================================
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4o-2024-08-06

# =============================================================================
# ğŸ§  GEMINI AI CONFIGURATION (Whale Watch Analysis)
# =============================================================================
# Get your API key from: https://aistudio.google.com/app/apikey
# Used for: Whale Watch transaction analysis with thinking mode and Deep Dive
# Documentation: See pages/api/whale-watch/analyze-gemini.ts for implementation details

# Gemini API Key (REQUIRED for Whale Watch AI analysis)
# Format: Must start with "AIzaSy" followed by 33 characters
# Example: AIzaSyAbCdEfGhIjKlMnOpQrStUvWxYz1234567
# Validation: API key format is validated on startup
GEMINI_API_KEY=your_gemini_api_key_here

# Model Selection (Optional - defaults to gemini-2.5-flash)
# Options: 
#   - gemini-2.5-flash: Fast analysis (~3 seconds), optimized for speed
#   - gemini-2.5-pro: Deep analysis (~7 seconds), comprehensive insights
# 
# Automatic Selection Logic:
#   - Transactions < 100 BTC: Uses gemini-2.5-flash (cost-effective)
#   - Transactions >= 100 BTC: Uses gemini-2.5-pro (Deep Dive enabled)
#   - User can override via API request parameter
# 
# Cost Estimates (per analysis, as of January 2025):
#   - Flash: ~$0.0001 (input + output tokens)
#   - Pro: ~$0.0005 (input + output tokens)
#   - Deep Dive: ~$0.002 (extended context + blockchain data)
GEMINI_MODEL=gemini-2.5-flash

# Thinking Mode (Optional - defaults to true)
# Enable to see AI's step-by-step reasoning process in analysis
# When enabled:
#   - Shows AI's thought process in collapsible "AI Reasoning Process" section
#   - Adds system instruction to model for transparent reasoning
#   - Increases response time by ~10-20%
#   - Helps users understand how AI arrived at conclusions
# When disabled:
#   - Only shows final analysis without reasoning steps
#   - Faster response times
#   - Smaller response payloads
GEMINI_ENABLE_THINKING=true

# Deep Dive Threshold (Optional - defaults to 100 BTC)
# Minimum transaction size to offer Deep Dive analysis with Gemini Pro
# Deep Dive Features:
#   - Fetches blockchain history for source and destination addresses
#   - Analyzes last 10 transactions for each address
#   - Calculates 30-day volume and transaction patterns
#   - Detects accumulation, distribution, and mixing behaviors
#   - Identifies exchange flow direction (deposit/withdrawal)
#   - Provides comprehensive fund flow tracing
#   - Uses Gemini 2.5 Pro with 32K token limit
# Processing Time: 10-15 seconds (includes blockchain data fetch)
GEMINI_PRO_THRESHOLD_BTC=100

# API Performance Settings (Optional)
# Maximum retry attempts for failed API calls (default: 2)
# Retry Logic:
#   - Uses exponential backoff (1s, 2s, 4s)
#   - Only retries on retryable errors (429, 500, 502, 503, 504)
#   - Does not retry on client errors (400, 401, 403)
# Recommended: 2-3 retries for production
GEMINI_MAX_RETRIES=2

# Request timeout in milliseconds (default: 15000 = 15 seconds)
# Timeout Handling:
#   - Standard analysis: 15 seconds
#   - Deep Dive analysis: 30 seconds (automatically extended)
#   - On timeout: Returns partial analysis with disclaimer
# Recommended: 25000 for production (Vercel has 30s function limit)
# Note: Must be less than Vercel's maxDuration (30s) to prevent 504 errors
GEMINI_TIMEOUT_MS=25000

# Rate Limiting (Optional)
# Maximum requests per minute to Gemini API (default: 60)
# Gemini API Limits (as of January 2025):
#   - Free tier: 15 requests per minute
#   - Paid tier: 60 requests per minute
#   - Enterprise: Custom limits
# Note: Exceeding rate limits results in 429 errors with retry-after header
GEMINI_MAX_REQUESTS_PER_MINUTE=60

# Cost Management (Optional)
# Maximum output tokens for Flash model (default: 8192)
# Token Limits:
#   - Flash: 8,192 tokens (sufficient for standard analysis)
#   - Pro: 32,768 tokens (required for Deep Dive)
# Cost Impact:
#   - Lower values reduce cost but may truncate analysis
#   - Higher values increase cost but provide more detailed insights
# Recommended: 8192 for Flash, 32768 for Pro
GEMINI_FLASH_MAX_OUTPUT_TOKENS=8192

# Maximum output tokens for Pro model (default: 32768)
# Used for Deep Dive comprehensive analysis with blockchain data
# Includes: Address behavior, fund flow, historical patterns, market predictions
GEMINI_PRO_MAX_OUTPUT_TOKENS=32768

# Structured Output Validation (Automatic)
# The API automatically validates responses against JSON schema
# Validation includes:
#   - Required fields: transaction_type, market_impact, confidence, reasoning, key_findings, trader_action
#   - Confidence range: 0-100
#   - Minimum array lengths: key_findings (3-10 items)
#   - Minimum text lengths: reasoning (100+ chars), trader_action (50+ chars)
# Invalid responses are rejected with detailed error messages

# =============================================================================
# ğŸ“° NEWS API CONFIGURATION  
# =============================================================================
ALPHA_VANTAGE_API_KEY=your_alpha_vantage_key_here
NEWSAPI_KEY=your_newsapi_key_here

# =============================================================================
# ğŸ“Š MARKET DATA CONFIGURATION
# =============================================================================
# CoinMarketCap API (PRIMARY data source for UCIE)
# Get from: https://pro.coinmarketcap.com/account
# Used for: Comprehensive market data, price, volume, market cap, metadata
COINMARKETCAP_API_KEY=your_coinmarketcap_key_here

# NOTE: Binance API removed (location restricted, not globally accessible)
# Alternative sources: CoinMarketCap (primary), Kraken, Coinbase, CryptoCompare

# =============================================================================
# ğŸ”— BLOCKCHAIN EXPLORER API CONFIGURATION (On-Chain Analytics)
# =============================================================================
# Blockchain explorer APIs for on-chain data analysis
# Used by: UCIE On-Chain Analytics for holder distribution, whale tracking, smart contract analysis
# 
# Setup Instructions:
#   1. Etherscan: https://etherscan.io/myapikey
#   2. BSCScan: https://bscscan.com/myapikey
#   3. Polygonscan: https://polygonscan.com/myapikey
# 
# Features:
#   - Top 100 holder distribution analysis
#   - Whale transaction detection (>$100k)
#   - Smart contract security analysis
#   - Exchange flow tracking
#   - Wallet behavior classification
# 
# Rate Limits (Free Tier):
#   - Etherscan: 5 calls/second, 100,000 calls/day
#   - BSCScan: 5 calls/second, 100,000 calls/day
#   - Polygonscan: 5 calls/second, 100,000 calls/day
# 
# Documentation:
#   - Etherscan: https://docs.etherscan.io/
#   - BSCScan: https://docs.bscscan.com/
#   - Polygonscan: https://docs.polygonscan.com/

# Etherscan API Key (for Ethereum tokens)
# Get from: https://etherscan.io/myapikey
# Used for: ETH, USDT, USDC, and other ERC-20 tokens
ETHERSCAN_API_KEY=your_etherscan_api_key_here

# BSCScan API Key (for Binance Smart Chain tokens)
# Get from: https://bscscan.com/myapikey
# Used for: BNB and BEP-20 tokens
BSCSCAN_API_KEY=your_bscscan_api_key_here

# Polygonscan API Key (for Polygon tokens)
# Get from: https://polygonscan.com/myapikey
# Used for: MATIC and Polygon tokens
POLYGONSCAN_API_KEY=your_polygonscan_api_key_here

# =============================================================================
# ğŸ“± SOCIAL SENTIMENT API CONFIGURATION (UCIE Social Sentiment)
# =============================================================================
# Social media APIs for sentiment analysis and influencer tracking
# Used by: UCIE Social Sentiment Analysis for Twitter, Reddit, and LunarCrush data
# 
# Setup Instructions:
#   1. LunarCrush: https://lunarcrush.com/developers/api
#   2. Twitter: https://developer.twitter.com/en/portal/dashboard
#   3. Reddit: Uses public API (no key required)
# 
# Features:
#   - Aggregate sentiment from multiple social platforms
#   - Track key influencers and their sentiment
#   - Identify trending topics and hashtags
#   - Detect sentiment shifts (>30 point changes)
#   - Calculate social volume and engagement metrics
# 
# Rate Limits:
#   - LunarCrush Free: 50 calls/day
#   - LunarCrush Pro: Unlimited calls
#   - Twitter Basic: 500,000 tweets/month
#   - Twitter Pro: 2,000,000 tweets/month
#   - Reddit: 60 calls/minute (unauthenticated)
# 
# Documentation:
#   - LunarCrush: https://lunarcrush.com/developers/docs
#   - Twitter API v2: https://developer.twitter.com/en/docs/twitter-api
#   - Reddit API: https://www.reddit.com/dev/api

# LunarCrush API Key (REQUIRED for social metrics)
# Get from: https://lunarcrush.com/developers/api
# Used for: Social score, sentiment, volume, galaxy score, trending data
# Pricing: Free tier (50 calls/day), Pro tier (unlimited)
# Features:
#   - Aggregated social metrics from 2000+ sources
#   - Social volume and dominance tracking
#   - Galaxy Score (0-100 overall social health)
#   - Alt Rank (ranking among all cryptocurrencies)
#   - Sentiment analysis (-100 to +100)
LUNARCRUSH_API_KEY=your_lunarcrush_api_key_here

# Twitter API Bearer Token (REQUIRED for tweet analysis)
# Get from: https://developer.twitter.com/en/portal/dashboard
# Used for: Tweet search, sentiment analysis, influencer tracking
# Setup:
#   1. Create Twitter Developer account
#   2. Create a new App
#   3. Generate Bearer Token from Keys and Tokens tab
#   4. Copy Bearer Token (starts with "AAAA...")
# Features:
#   - Search recent tweets (last 7 days)
#   - Track mentions and engagement
#   - Identify key influencers (10k+ followers)
#   - Analyze hashtags and trending topics
# Rate Limits:
#   - Essential: 500,000 tweets/month
#   - Elevated: 2,000,000 tweets/month
TWITTER_BEARER_TOKEN=your_twitter_bearer_token_here

# Reddit API Configuration (Optional - uses public API by default)
# Reddit allows unauthenticated requests to public data
# For higher rate limits, create a Reddit app:
#   1. Go to https://www.reddit.com/prefs/apps
#   2. Click "Create App" or "Create Another App"
#   3. Select "script" as app type
#   4. Copy Client ID and Client Secret
# 
# Note: Unauthenticated requests work fine for most use cases
# Only configure if you need higher rate limits (600 calls/minute)
REDDIT_CLIENT_ID=your_reddit_client_id_here
REDDIT_CLIENT_SECRET=your_reddit_client_secret_here
REDDIT_USER_AGENT=UCIE/1.0

# =============================================================================
# ğŸ“§ EMAIL CONFIGURATION (Office 365 / Microsoft Graph API)
# =============================================================================
# Email service for user notifications and authentication emails
# Uses existing Office 365 setup via Microsoft Graph API
# 
# Current Usage:
#   - Welcome emails after registration
#   - Password reset emails (coming soon)
#   - Security alerts (coming soon)
#   - Account notifications (coming soon)
# 
# Setup Instructions:
#   1. Ensure Office 365 tenant is configured
#   2. Verify Microsoft Graph API permissions
#   3. Use existing Azure AD app registration
#   4. Configure sender email as valid Office 365 mailbox
# 
# Documentation: 
#   - Microsoft Graph: https://docs.microsoft.com/en-us/graph/
#   - Office 365 Setup: See OFFICE-365-EMAIL-SETUP.md

# Email Sender Configuration (REQUIRED for welcome emails)
# Must be a valid mailbox in your Office 365 tenant
# Used for: Outbound authentication emails, welcome messages
# Format: Valid email address (e.g., no-reply@yourdomain.com)
# Example: no-reply@arcane.group
# 
# Requirements:
#   - Must exist as mailbox in Office 365
#   - Must have send permissions
#   - Should be a no-reply or system address
# 
# Note: This uses the existing Office 365 configuration
# Alias: Also known as OFFICE365_FROM_EMAIL in some documentation
SENDER_EMAIL=no-reply@arcane.group

# Email Receiver Configuration (Optional)
# Used for: Contact form submissions, user inquiries, support requests
# Format: Valid email address for receiving messages
# Example: support@yourdomain.com
CONTACT_RECEIVER=support@arcane.group

# Azure AD Configuration (Uses existing Office 365 setup)
# These should already be configured for Office 365 email functionality
# Get credentials from: https://portal.azure.com

# Azure Tenant ID (Directory ID from Azure Portal)
# Format: UUID (e.g., c152592e-75fe-4f4f-8e8a-8acf38daf0b3)
# Location: Azure Portal > Azure Active Directory > Overview > Tenant ID
AZURE_TENANT_ID=your_azure_tenant_id_here

# Azure Client ID (Application ID from App Registration)
# Format: UUID (e.g., 83bcb34c-3c73-41e9-8dc8-94d257e8755c)
# Location: Azure Portal > App Registrations > Your App > Application (client) ID
AZURE_CLIENT_ID=your_azure_client_id_here

# Azure Client Secret (Generated secret from App Registration)
# Format: Secret string (e.g., F6U8Q~J-GFXtxSBWf5paE3jyIsGoir6rKAgTWbTp)
# Location: Azure Portal > App Registrations > Your App > Certificates & secrets
# Note: Keep this secret secure, rotate regularly (every 6-12 months)
AZURE_CLIENT_SECRET=your_azure_client_secret_here

# Email Feature Configuration (Optional)
# Control which email features are enabled

# Enable welcome emails after registration (default: true)
# Set to false to disable welcome emails
ENABLE_WELCOME_EMAIL=true

# Enable password reset emails (default: true)
# Coming soon - for password reset functionality
ENABLE_PASSWORD_RESET_EMAIL=true

# Enable security alert emails (default: true)
# Coming soon - for suspicious activity notifications
ENABLE_SECURITY_ALERT_EMAIL=true

# Alternative Email Providers (Optional - Not currently used)
# These are available for future implementation if needed

# SendGrid API Key (if using SendGrid instead of Office 365)
# Get from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=your_sendgrid_api_key_here

# SMTP Configuration (if using custom SMTP server)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your_smtp_username
SMTP_PASSWORD=your_smtp_password
SMTP_SECURE=true

# =============================================================================
# ğŸ”§ APPLICATION CONFIGURATION
# =============================================================================
# Enable real-time data fetching
ENABLE_LIVE_DATA=true

# Application URL (REQUIRED for authentication)
# Used for: Email links, OAuth redirects, CORS configuration
# Format: Full URL with protocol (https://your-domain.com)
# Examples:
#   - Production: https://news.arcane.group
#   - Staging: https://staging.arcane.group
#   - Development: http://localhost:3000
# 
# Note: Must match your actual deployment URL
NEXT_PUBLIC_APP_URL=https://news.arcane.group

# Next.js Configuration (Optional - for NextAuth if used)
NEXTAUTH_URL=https://your-domain.vercel.app
NEXTAUTH_SECRET=your_nextauth_secret_here

# =============================================================================
# ğŸ—„ï¸ DATABASE CONFIGURATION (Vercel Postgres)
# =============================================================================
# Vercel Postgres connection string for user authentication database
# Get from: Vercel Dashboard > Storage > Your Database > .env.local tab
# 
# Setup Instructions:
#   1. Go to Vercel Dashboard > Storage
#   2. Click "Create Database" > Select "Postgres"
#   3. Name: agents-md-auth-db (or your preferred name)
#   4. Region: Choose closest to your users (e.g., us-east-1)
#   5. Copy the DATABASE_URL from the .env.local tab
# 
# Format: postgres://default:password@host:5432/verceldb?sslmode=require
# Components:
#   - Protocol: postgres://
#   - User: default
#   - Password: [auto-generated secure password]
#   - Host: [your-instance].postgres.vercel-storage.com
#   - Port: 5432
#   - Database: verceldb
#   - SSL Mode: require (REQUIRED for security)
# 
# Security Notes:
#   - Never commit this to version control
#   - Store securely in password manager
#   - Rotate password if compromised
#   - Use different databases for dev/staging/production
# 
# Documentation: https://vercel.com/docs/storage/vercel-postgres
# Pricing: https://vercel.com/docs/storage/vercel-postgres/usage-and-pricing
DATABASE_URL=postgres://default:password@host.postgres.vercel-storage.com:5432/verceldb?sslmode=require

# =============================================================================
# ğŸ” AUTHENTICATION CONFIGURATION
# =============================================================================

# JWT Secret for token signing (REQUIRED)
# Used to sign and verify JWT tokens for user sessions
# 
# Generation Instructions:
#   Method 1 (OpenSSL): openssl rand -base64 32
#   Method 2 (Node.js): node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
#   Method 3 (Online): https://generate-secret.vercel.app/32
# 
# Requirements:
#   - Minimum 256 bits (32 bytes)
#   - Cryptographically random
#   - Unique per environment (dev/staging/prod)
#   - Never reuse across projects
# 
# Security Notes:
#   - Keep this secret secure and never commit to version control
#   - Rotate every 6-12 months or immediately if compromised
#   - Use different secrets for dev/staging/production
#   - If changed, all existing sessions will be invalidated
# 
# Example (DO NOT USE THIS):
#   JWT_SECRET=dGhpc2lzYW5leGFtcGxlc2VjcmV0ZG9ub3R1c2U=
JWT_SECRET=your_jwt_secret_here

# JWT Token Expiration (Optional - defaults to 7 days)
# Controls how long users stay logged in
# 
# Format: Zeit/ms format
#   Examples: "7d" (7 days), "30d" (30 days), "24h" (24 hours), "60m" (60 minutes)
# 
# Usage:
#   - Standard session: 7d (7 days) - Default for normal login
#   - Remember me session: 30d (30 days) - When user checks "Remember Me"
#   - Short session: 24h (24 hours) - For high-security environments
# 
# Recommendations:
#   - Production: 7d (balances security and convenience)
#   - Development: 30d (reduces re-login frequency)
#   - High-security: 24h or less
# 
# Note: Users can extend to 30 days by checking "Remember Me" during login
JWT_EXPIRATION=7d

# JWT Remember Me Expiration (Optional - defaults to 30 days)
# Extended session duration when user checks "Remember Me"
# Format: Same as JWT_EXPIRATION
# Recommended: 30d (30 days)
JWT_REMEMBER_ME_EXPIRATION=30d

# =============================================================================
# ğŸ›¡ï¸ RATE LIMITING CONFIGURATION (Vercel KV)
# =============================================================================
# Vercel KV (Redis) for distributed rate limiting
# Prevents brute force attacks and API abuse
# 
# Setup Instructions:
#   1. Go to Vercel Dashboard > Storage
#   2. Click "Create Database" > Select "KV"
#   3. Name: agents-md-rate-limit (or your preferred name)
#   4. Region: Same as Postgres for low latency
#   5. Copy all three KV variables from .env.local tab
# 
# Documentation: https://vercel.com/docs/storage/vercel-kv
# Pricing: https://vercel.com/docs/storage/vercel-kv/usage-and-pricing

# KV REST API URL (REQUIRED)
# Base URL for KV REST API
# Format: https://your-kv-instance.kv.vercel-storage.com
# Example: https://agents-md-rate-limit-abc123.kv.vercel-storage.com
KV_REST_API_URL=your_kv_rest_api_url_here

# KV REST API Token (REQUIRED)
# Read/Write token for setting and reading rate limit counters
# Used by: Login, registration, and other rate-limited endpoints
# Security: Keep secure, never commit to version control
KV_REST_API_TOKEN=your_kv_rest_api_token_here

# KV REST API Read-Only Token (Optional but recommended)
# Read-only token for checking rate limit status
# Used by: Monitoring and analytics endpoints
# Security: Less sensitive than write token, but still keep secure
KV_REST_API_READ_ONLY_TOKEN=your_kv_rest_api_read_only_token_here

# Rate Limiting Configuration (Optional)
# Fine-tune rate limiting behavior

# Maximum login attempts per email per window (default: 5)
# After this many failed attempts, user is temporarily blocked
# Recommended: 3-5 for production, 10 for development
# Too low: Legitimate users may be locked out
# Too high: Brute force attacks become easier
AUTH_RATE_LIMIT_MAX_ATTEMPTS=5

# Rate limit window in milliseconds (default: 900000 = 15 minutes)
# How long the rate limit counter persists
# Format: Milliseconds (900000 = 15 minutes, 3600000 = 1 hour)
# Recommended: 15 minutes (900000) for login attempts
# After this window, the counter resets automatically
AUTH_RATE_LIMIT_WINDOW_MS=900000

# Maximum registration attempts per IP per window (default: 5)
# Prevents automated account creation
# Recommended: 3-5 for production
AUTH_RATE_LIMIT_REGISTER_MAX_ATTEMPTS=5

# Registration rate limit window (default: 900000 = 15 minutes)
AUTH_RATE_LIMIT_REGISTER_WINDOW_MS=900000

# =============================================================================
# ğŸ”’ CRON JOB SECURITY
# =============================================================================
# Secret token for authenticating cron job requests
# Prevents unauthorized execution of scheduled tasks
# 
# Generation Instructions:
#   Method 1 (OpenSSL): openssl rand -base64 32
#   Method 2 (Node.js): node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# 
# Used by:
#   - Session cleanup cron job (/api/cron/cleanup-sessions)
#   - Future scheduled tasks
# 
# Setup in Vercel:
#   1. Go to Project Settings > Cron Jobs
#   2. Add cron job with path: /api/cron/cleanup-sessions
#   3. Schedule: 0 2 * * * (Daily at 2 AM UTC)
#   4. Add header: Authorization: Bearer [Your CRON_SECRET]
# 
# Security Notes:
#   - Keep this secret secure and never commit to version control
#   - Rotate every 6-12 months
#   - Use different secrets for dev/staging/production
#   - If compromised, update immediately and redeploy
CRON_SECRET=your_cron_secret_here

# =============================================================================
# ğŸ” SESSION MANAGEMENT CONFIGURATION
# =============================================================================

# Session Cleanup Configuration (Optional)
# Controls automatic cleanup of expired sessions

# Enable automatic session cleanup (default: true)
# Set to false to disable automatic cleanup
ENABLE_SESSION_CLEANUP=true

# Session cleanup interval in hours (default: 24)
# How often the cleanup cron job runs
# Recommended: 24 (daily cleanup)
SESSION_CLEANUP_INTERVAL_HOURS=24

# Session retention period in days (default: 30)
# How long to keep expired sessions before deletion
# Recommended: 30 days for audit purposes
SESSION_RETENTION_DAYS=30

# =============================================================================
# ğŸ” ACCESS CONTROL CONFIGURATION (Legacy - Will be deprecated)
# =============================================================================
# Early Access Code (for password protection)
# Users can enter this code to bypass the access gate
# Format: Any string (case-insensitive)
# Example: BITCOIN2025, EARLYACCESS, SOVEREIGN
# Note: This will be replaced by database-backed authentication
# Status: DEPRECATED - Use database authentication instead
NEXT_PUBLIC_ACCESS_CODE=BITCOIN2025

# Email Sender Address (Office 365 mailbox)
# Must be a valid mailbox in your Office 365 tenant
# Used for sending access gate emails via Microsoft Graph API
SENDER_EMAIL=no-reply@arcane.group

# Email Feature Flags (Future Implementation)
# Enable email notifications for whale alerts
ENABLE_EMAIL_NOTIFICATIONS=false

# Enable contact form functionality
ENABLE_CONTACT_FORM=false

# Enable email alerts for trade signals
ENABLE_TRADE_ALERTS_EMAIL=false

# Enable daily market summary emails
ENABLE_DAILY_SUMMARY_EMAIL=false

# =============================================================================
# ğŸš€ DEPLOYMENT CONFIGURATION
# =============================================================================
NODE_ENV=production
VERCEL_ENV=production

# =============================================================================
# âœ… ENVIRONMENT VALIDATION
# =============================================================================
# Use these commands to validate your environment configuration:
#
# 1. Check Database Connection:
#    node -e "const { Pool } = require('pg'); const pool = new Pool({ connectionString: process.env.DATABASE_URL }); pool.query('SELECT NOW()').then(() => console.log('âœ… Database connected')).catch(e => console.error('âŒ Database error:', e.message));"
#
# 2. Validate JWT Secret Length:
#    node -e "console.log(Buffer.from(process.env.JWT_SECRET, 'base64').length >= 32 ? 'âœ… JWT_SECRET is strong' : 'âŒ JWT_SECRET too short');"
#
# 3. Test Vercel KV Connection:
#    curl -H "Authorization: Bearer $KV_REST_API_TOKEN" "$KV_REST_API_URL/get/test"
#
# 4. Verify Azure AD Configuration:
#    node -e "['AZURE_TENANT_ID', 'AZURE_CLIENT_ID', 'AZURE_CLIENT_SECRET'].forEach(v => console.log(process.env[v] ? `âœ… ${v} set` : `âŒ ${v} missing`));"
#
# 5. Check Email Configuration:
#    node -e "console.log(process.env.SENDER_EMAIL?.includes('@') ? 'âœ… SENDER_EMAIL valid' : 'âŒ SENDER_EMAIL invalid');"
#
# 6. Run Full Validation Script:
#    npm run validate-env
#
# =============================================================================
# ğŸ“š ADDITIONAL RESOURCES
# =============================================================================
#
# Documentation:
#   â€¢ Main README: README.md
#   â€¢ Deployment Guide: docs/DEPLOYMENT.md
#   â€¢ User Guide: docs/USER-GUIDE.md
#   â€¢ Database Setup: docs/DATABASE-SETUP-GUIDE.md
#   â€¢ CSRF Protection: docs/CSRF-PROTECTION-GUIDE.md
#   â€¢ Session Cleanup: docs/SESSION-CLEANUP-GUIDE.md
#   â€¢ Admin API: docs/ADMIN-ACCESS-CODES-API.md
#
# Vercel Resources:
#   â€¢ Postgres: https://vercel.com/docs/storage/vercel-postgres
#   â€¢ KV (Redis): https://vercel.com/docs/storage/vercel-kv
#   â€¢ Environment Variables: https://vercel.com/docs/projects/environment-variables
#   â€¢ Cron Jobs: https://vercel.com/docs/cron-jobs
#
# Azure Resources:
#   â€¢ Azure Portal: https://portal.azure.com
#   â€¢ App Registrations: https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps
#   â€¢ Microsoft Graph API: https://docs.microsoft.com/en-us/graph/
#
# Security Best Practices:
#   â€¢ Never commit .env.local to version control
#   â€¢ Use different secrets for dev/staging/production
#   â€¢ Rotate secrets every 6-12 months
#   â€¢ Use strong, randomly generated secrets (32+ bytes)
#   â€¢ Enable 2FA on all service accounts
#   â€¢ Monitor authentication logs for suspicious activity
#   â€¢ Keep dependencies updated for security patches
#
# =============================================================================
# ğŸ”¬ UCIE (Universal Crypto Intelligence Engine) API CONFIGURATION
# =============================================================================
# Additional API keys required for UCIE advanced features
# These are optional but recommended for full UCIE functionality
# 
# UCIE Features:
#   - Multi-source market data aggregation
#   - On-chain analytics and whale tracking
#   - Social sentiment analysis
#   - News aggregation with AI impact assessment
#   - Technical analysis with 15+ indicators
#   - Predictive modeling and pattern recognition
#   - Risk assessment and portfolio analysis
#   - Derivatives and funding rate analysis
#   - DeFi protocol metrics
# 
# Setup Priority:
#   HIGH: CAESAR_API_KEY, ETHERSCAN_API_KEY, LUNARCRUSH_API_KEY
#   MEDIUM: COINGECKO_API_KEY, CRYPTOCOMPARE_API_KEY
#   LOW: BSCSCAN_API_KEY, POLYGONSCAN_API_KEY, MESSARI_API_KEY

# Caesar AI Research API (HIGH PRIORITY)
# Get from: https://caesar.xyz/api
# Used for: Deep research with source verification
# Features: Multi-source research, citation tracking, confidence scoring
# Rate Limit: 10 requests/minute
# Cost: ~$0.05 per research job
CAESAR_API_KEY=your_caesar_api_key_here

# CryptoCompare API (MEDIUM PRIORITY)
# Get from: https://www.cryptocompare.com/cryptopian/api-keys
# Used for: Additional news source and market data
# Features: News aggregation, historical data, social stats
# Rate Limit: 100 calls/minute (free tier)
# Cost: Free tier available
CRYPTOCOMPARE_API_KEY=your_cryptocompare_api_key_here

# Messari API (LOW PRIORITY)
# Get from: https://messari.io/api
# Used for: Fundamental data and tokenomics
# Features: Protocol metrics, team info, governance data
# Rate Limit: 20 calls/minute (free tier)
# Cost: Free tier available
MESSARI_API_KEY=your_messari_api_key_here

# CoinGlass API (OPTIONAL)
# Get from: https://www.coinglass.com/api
# Used for: Derivatives data (funding rates, open interest, liquidations)
# Features: Multi-exchange derivatives data, liquidation heatmaps
# Rate Limit: 100 calls/minute
# Cost: Free tier available
COINGLASS_API_KEY=your_coinglass_api_key_here

# =============================================================================
# ğŸ” SECURITY CHECKLIST
# =============================================================================
#
# Before deploying to production:
#   [ ] All secrets are randomly generated (not examples)
#   [ ] JWT_SECRET is at least 32 bytes
#   [ ] CRON_SECRET is at least 32 bytes
#   [ ] Database uses SSL/TLS (sslmode=require)
#   [ ] Azure AD app has minimal required permissions
#   [ ] SENDER_EMAIL is a dedicated system mailbox
#   [ ] Rate limiting is enabled (KV configured)
#   [ ] Environment variables are set in Vercel dashboard
#   [ ] .env.local is in .gitignore
#   [ ] No secrets are hardcoded in source code
#   [ ] CORS is configured for production domain only
#   [ ] HTTPS is enforced (no HTTP in production)
#   [ ] Session cleanup cron job is scheduled
#   [ ] Database backups are enabled
#   [ ] Monitoring and alerting are configured
#   [ ] UCIE API keys configured (see UCIE section above)
#
# =============================================================================